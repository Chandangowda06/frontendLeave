import{r as n,a as f,A as k,R as g,j as e,F as y,b as r,B as N,L as C,U as L}from"./index-fe9762f0.js";function A(){const[a,d]=n.useState();return n.useEffect(()=>{a||(async()=>{try{const o=await f.get(`${k}`,{...g()});d(o.data)}catch(o){console.error("Error fetching Leave Applications:",o)}})()},[a]),a}const S=({object:a,action:d,onClose:l,onApprove:o})=>{const[p,c]=n.useState(!0),s=()=>{o(),c(!1)},i=()=>{c(!1),l()};return e(y,{children:p&&e("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50",children:r("div",{id:"popup-modal",className:"overflow-y-auto overflow-x-hidden relative bg-white rounded-lg shadow dark:bg-gray-700",children:[r("button",{type:"button",className:"absolute top-3 end-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:i,children:[e("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e("span",{className:"sr-only",children:"Close modal"})]}),r("div",{className:"p-4 md:p-5 text-center",children:[e("svg",{className:"mx-auto mb-4 text-gray w-12 h-12 dark:text-gray-200","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),r("h3",{className:"mb-5 text-lg font-normal text-black dark:text-gray-400",children:["Are you sure you want to ",d+"e"," ",a.applicant.name,"(",a==null?void 0:a.application_id,") application?",e("br",{})]}),e("button",{"data-modal-hide":"popup-modal",type:"button",className:"text-white bg-primary focus:ring-4 focus:outline-none focus:ring-red-300 dark:focus:ring-red-800 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center me-2",onClick:s,children:"Yes, I'm sure"}),e("button",{type:"button",className:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600 dark:focus:ring-gray-600",onClick:i,children:"No, cancel"})]})]})})})},M=async(a,d)=>{try{const l=await f.patch(`${k}${d}/`,{action_taken:a},{...g()});console.log(l.data),l.status===200?(window.alert(l.data.message),window.location.reload()):window.alert(l.data.error)}catch(l){window.alert(l)}},R=()=>{const a=A();console.log(a);const[d,l]=n.useState(!1),[o,p]=n.useState(""),[c,s]=n.useState(!1);n.useState(!1);const[i,x]=n.useState(),[u,b]=n.useState(),w=t=>{x(t),s(!0),b("Approv")},v=t=>{x(t),s(!0),b("Reject")},h=a==null?void 0:a.filter(t=>Object.values(t).some(m=>m&&typeof m=="string"&&m.toLowerCase().includes(o.toLowerCase())));return r(y,{children:[" ",e(N,{pageName:"Leave Application"}),d?e(C,{}):r("div",{className:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1",children:[r("div",{className:"flex items-center justify-between mb-6",children:[e("h4",{className:"text-xl font-semibold text-black dark:text-white",children:"Leaves"}),e("div",{className:"hidden sm:block",children:e("form",{action:"",onSubmit:t=>{t.preventDefault()},children:r("div",{className:"relative",children:[e("button",{className:"absolute top-1/2 left-0 -translate-y-1/2",children:r("svg",{className:"fill-body hover:fill-primary dark:fill-bodydark dark:hover:fill-primary",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.16666 3.33332C5.945 3.33332 3.33332 5.945 3.33332 9.16666C3.33332 12.3883 5.945 15 9.16666 15C12.3883 15 15 12.3883 15 9.16666C15 5.945 12.3883 3.33332 9.16666 3.33332ZM1.66666 9.16666C1.66666 5.02452 5.02452 1.66666 9.16666 1.66666C13.3088 1.66666 16.6667 5.02452 16.6667 9.16666C16.6667 13.3088 13.3088 16.6667 9.16666 16.6667C5.02452 16.6667 1.66666 13.3088 1.66666 9.16666Z",fill:""}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.2857 13.2857C13.6112 12.9603 14.1388 12.9603 14.4642 13.2857L18.0892 16.9107C18.4147 17.2362 18.4147 17.7638 18.0892 18.0892C17.7638 18.4147 17.2362 18.4147 16.9107 18.0892L13.2857 14.4642C12.9603 14.1388 12.9603 13.6112 13.2857 13.2857Z",fill:""})]})}),e("input",{type:"text",placeholder:"Type to search...",className:"w-full bg-transparent pr-4 pl-9 focus:outline-none",value:o,onChange:t=>p(t.target.value)})]})})})]}),e("div",{className:"max-w-full overflow-x-auto",children:r("table",{className:"w-full table-auto",children:[e("thead",{children:r("tr",{className:"bg-gray-2 text-left dark:bg-meta-4",children:[e("th",{className:"min-w-[220px] py-4 px-4 font-medium text-black dark:text-white xl:pl-11",children:"Applicant"}),e("th",{className:"min-w-[150px] py-4 px-4 font-medium text-black dark:text-white",children:"Leave Type"}),e("th",{className:"min-w-[120px] py-4 px-4 font-medium text-black dark:text-white",children:"Start Date"}),e("th",{className:"min-w-[120px] py-4 px-4 font-medium text-black dark:text-white",children:"End Date"}),e("th",{className:"min-w-[120px] py-4 px-4 font-medium text-black dark:text-white",children:"document"}),e("th",{className:"py-4 px-4 font-medium text-black dark:text-white",children:"Actions"})]})}),e("tbody",{children:h==null?void 0:h.map(t=>r("tr",{children:[e("td",{className:"border-b border-[#eee] py-5 px-4 pl-9 dark:border-strokedark xl:pl-11",children:r("div",{className:"flex items-center gap-3 p-2.5 xl:p-5",children:[e("div",{children:e("img",{className:"w-10 h-10 rounded-full",src:t.applicant.image?t.applicant.image:L,alt:"Profile image"})}),e("p",{className:"text-black dark:text-white sm:block",children:t.applicant.name})]})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e("p",{className:"inline-flex text-black dark:text-white",children:t.leave_type?t.leave_type:"-----"})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e("p",{className:"inline-flex text-black dark:text-white",children:t.start_date?t.start_date:"-----"})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e("p",{className:"inline-flex text-black dark:text-white",children:t.end_date?t.end_date:"-----"})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e("a",{href:t.letter?t.letter:"#",className:"inline-flex text-primary",children:"open"})}),e("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:r("div",{className:"flex items-center space-x-3.5",children:[e("button",{onClick:()=>w(t),className:"inline-flex items-center justify-center rounded-full bg-primary py-2 px-4 text-center font-medium text-white hover:bg-opacity-90 lg:px-2 lg:py-3 xl:px-4 xl:py-4",children:"Approve"}),e("button",{onClick:()=>v(t),className:"inline-flex items-center justify-center rounded-full bg-red-500 py-2 px-4 text-center font-medium text-white hover:bg-opacity-90 lg:px-2 lg:py-3 xl:px-4 xl:py-4",children:"Reject"}),e("button",{className:"hover:text-primary"}),c&&e(S,{object:i,action:u,onApprove:()=>{l(!0),M(u+"ed",i.id),l(!1)},onClose:()=>s(!1)})]})})]},t.id))})]})})]})]})};export{R as default};
