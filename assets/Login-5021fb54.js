import{u as v,r as o,j as e,F as I,L,b as t,p as S,a as x,q as A}from"./index-8b19a676.js";function j(){const n=v(),[f,i]=o.useState(),[h,p]=o.useState(!1),k=()=>{localStorage.getItem("isLoggedIn")=="true"&&p(!0)};o.useEffect(()=>{k()},[]),h&&n("/dashboard/profile");const[s,y]=o.useState({identifier:"",password:""}),[a,w]=o.useState({username:"",email:"",password:"",msg:""}),m=d=>{y({...s,[d.target.name]:d.target.value})},N=async d=>{i(!0),d.preventDefault();let u="username";const g=s.identifier;/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(g)&&(u="email");try{const r={[u]:g,password:s.password},l=await x.post(A,r);if(l.status===200){const b=l.data.token;b&&(localStorage.setItem("token",b),localStorage.setItem("username",l.data.username),localStorage.setItem("isLoggedIn",`${!0}`),n("/dashboard/profile"))}}catch(r){x.isAxiosError(r)&&r.response&&r.response.status===400&&(w({username:r.response.data.username||"",email:r.response.data.email||"",password:r.response.data.password||"",msg:"Please check your credentials"}),console.log(r))}finally{i(!1)}},c="remember";return e(I,{children:f?e(L,{}):e("div",{className:"flex items-center justify-center h-screen",children:e("div",{className:"w-full max-w-sm p-4 bg-white border border-gray-200 rounded-lg shadow sm:p-6 md:p-8 dark:bg-gray-800 dark:border-gray-700",children:t("form",{className:"space-y-6",onSubmit:N,children:[e("h5",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Sign in to our platform"}),a.msg&&e("p",{className:"block mb-2 text-sm font-medium text-red-500 dark:text-red-500",children:a.msg}),t("div",{children:[e("label",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Email or Username"}),e("input",{name:"identifier",value:s.identifier,onChange:m,className:`bg-gray-50 border border-gray-300 text-black text-sm rounded-lg focus:ring-blue-500 
                placeholder-gray-500
                focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white`,placeholder:"name@example.com",required:!0}),a.email&&e("span",{className:"flex items-center font-medium  tracking-wide text-red-500 text-xs mt-1 ml-1",children:a.email}),a.username&&e("span",{className:"flex items-center font-medium  tracking-wide text-red-500 text-xs mt-1 ml-1",children:a.username})]}),t("div",{children:[e("label",{className:"block mb-2 text-sm font-medium text-black dark:text-white",children:"Your password"}),e("input",{type:"password",name:"password",value:s.password,onChange:m,placeholder:"password",className:`bg-gray-50 text-black dark:text-white border border-gray-300 text-black text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 
                placeholder-gray-500
                dark:placeholder-gray-400 dark:text-white`,required:!0}),a.password&&e("span",{className:"flex items-center font-medium  tracking-wide text-red-500 text-xs mt-1 ml-1",children:a.password})]}),t("div",{className:"flex items-start",children:[t("div",{className:"flex items-start",children:[e("div",{className:"flex items-center h-5",children:e("input",{id:c,type:"checkbox",value:"",className:"w-4 text-black dark:text-white h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-blue-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800",required:!0})}),e("label",{htmlFor:c,className:"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Remember me"})]}),e(S,{to:"/reset-password",className:"ms-auto text-sm text-blue-700 hover:underline dark:text-blue-500",children:"Lost Password?"})]}),e("button",{type:"submit",className:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Login to your account"}),t("div",{className:"text-sm font-medium text-gray-800 dark:text-gray-300",children:["Not registered?"," ",e("a",{href:"#",className:"text-blue-700 hover:underline dark:text-blue-500",children:"Contact"})]})]})})})})}export{j as default};
